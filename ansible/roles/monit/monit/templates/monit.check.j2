# {{ name }} check generated by Ansible
check {{ config.check_type }} {{ config.name | default(name) }}
{% if 'id_type' in config %}
  with {{ config.id_type }} {{ config.check_id }}
{% endif %}
{% if 'every' in config %}
  every {{ config.every }}
{% endif %}
{% if 'alert' in config %}
  alert {{ config.alert }} {% if 'but_not_on' in config %}but not on{% else %}on{% endif %} {{ config.alert_events | join(', ') }}
{% endif %}
{% if 'group' in config %}
  group {{ config.group }}
{% endif %}
{% if 'depends' in config %}
  depends on {{ config.depends }}
{% endif %}
{% if 'start' in config %}

  start "{{ config.start }}"
  {% if 'start_as' in config %}
    as uid {{ config.start_as }} and gid {{ config.start_as_group }}
  {% endif %}
{% endif %}
{% if 'stop' in config %}

  stop "{{ config.stop }}"
  {% if 'stop_as' in config %}
    as uid {{ config.stop_as }} and gid {{ config.stop_as_group }}
  {% endif %}
{% endif %}
{% if 'start' in config %}

  mode {{ monit_monitoring_mode }}

{% endif %}
{% for test in config.tests %}
  if {{ test.condition }}
    then {{ test.action }}
{% endfor %}
